<link rel="import" href="../vendor/polymer/polymer.html">
<link rel="import" href="gt-item.html">
<link rel="import" href="gt-model.html">

<polymer-element name="gt-list" attributes="list url model">
  <template>
    <gt-item item="{{list}}" url="{{url}}" model="{{model}}"></gt-item>
    <div id="outer"></div>
    <ul>
      <template repeat="{{ item in submodel.items }}">
        <gt-item item="{{item}}" model="{{submodel}}" url="{{url}}/tasks/{{item.id}}"></gt-item>
      </template>
    </ul>
  </template>
  <script>
    Polymer('gt-list', {
      ready: function() {
        this.asyncMethod(function() {
          this.submodel = document.createElement('gt-model');
          this.submodel.items = []
          this.submodel.url = '/lists/' + this.list.id + '/tasks';
          this.$.outer.appendChild(this.submodel);
        });
      }
    });
  </script>
</polymer-element>